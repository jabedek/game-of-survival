<div
  class="field-container"
  [style.width.px]="fieldSize"
  [style.height.px]="fieldSize"
  (mousedown)="toggleSelf()"
  (contextmenu)="addBroodOnContextmenu($event)"
>
  <div class="field" *ngIf="selfDetails$ | async as data; else loading">
    <div class="field__content">
      <ng-container
        *ngIf="data?.occupyingUnit; then particleUnit"
      ></ng-container>
      <!-- <app-particle
        *ngIf="data?.occupyingUnit && pos"
        [fieldPos]="{ row: pos.row, column: pos.column }"
        [particleUnit]="data?.occupyingUnit"
        [isColor]="'blue'"
      >
      </app-particle> -->

      <app-obsticle
        *ngIf="data?.blocked === true && !data?.occupyingUnit"
        [fieldPos]="{ row: pos.row, column: pos.column }"
        [row]="pos.column"
        [column]="pos.row"
      >
      </app-obsticle>

      <ng-container *ngIf="displayDetails">
        {{ data?.blocked }}
      </ng-container>
    </div>
  </div>

  <ng-template #loading>...</ng-template>

  <ng-template #particleUnit let-item>
    <div [style.width.px]="CSSsize" [style.height.px]="CSSsize">
      <!-- <p class="particle particle--test"></p> -->
      <p class="particle {{ 'particle--' + item.color }}"></p>
    </div>
    <!-- class="particle particle--test {{ '!particle--' + particleUnit.color }}" -->
    <!-- <p class="pos__X" *ngIf="fieldPos">{{ fieldPos.x }}</p>
<p class="pos__Y" *ngIf="fieldPos">{{ fieldPos.y }}</p> -->
  </ng-template>
</div>
